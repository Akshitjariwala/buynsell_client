<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Product Ad</title>
    {%load static %}
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="static/fileinput/css/fileinput.min.css">
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/mystate.js' %}"></script>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Slabo+27px" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        body {
          background: #f1f1f1;
          font-family: 'Open Sans', sans-serif;
          line-height: 1.8;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top" style="margin-bottom:10px;border-bottom: solid 1px #ddd;">
        <a class="navbar-brand" href="/bands/homepage"><span style="margin-left:100px;">BuyNSell</span></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarText" style="margin-left:100px;">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="/bands/homepage/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
        </ul>
        <div>
          <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/bands/updateuser/">{{first_name}} {{last_name}}<span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/bands/logout/">Logout</a>
          </li>
        </ul>
        </div>
      </div>
    </nav>
<div class="container" style="width:100%;height:600px;background-color:#181818;margin-top:50px;margin-bottom:50px;padding-left:1px;">
        {% load static %}
    <div style="float:left;width:50%;">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="width:570px;height:600px;">
          <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
          </ol>
          <div class="carousel-inner">
              {% if image_list.0 %}
              <div class="carousel-item active">
                  <img src={{image_list.0}} alt="First slide" width="580" height="600">
              </div>
              {% endif %}
              {% if image_list.1 %}
              <div class="carousel-item">
                <img src={{image_list.1}} alt="Second slide" width="580" height="600">
              </div>
              {% endif %}
              {% if image_list.2 %}
              <div class="carousel-item">
                <img src={{image_list.2}} alt="Third slide" width="580" height="600">
              </div>
              {% endif %}
              {% if image_list.3 %}
              <div class="carousel-item">
                <img src={{image_list.3}} alt="Third slide" width="580" height="600">
              </div>
              {% endif %}
          </div>
          <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
    </div>
    <div>
        {% for data in user_data %}
            <label id="email" hidden>{{ data.user_email }}</label>
            <label id="first_name" hidden>{{ data.first_name }}</label>
            <label id="last_name" hidden>{{ data.last_name }}</label>
            <label id="phone" hidden>{{ data.user_phone_no }}</label>
        {% endfor %}
    </div>
        <div style="float:right;width:50%;">
            {% for product in product %}
            <label style="color:rgba(255,255,255,1);font:normal normal normal 25px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;margin-left:50px;margin-top:50px;"><strong><label id="product">{{ product.ad_title }}</label></strong></label>
            <br>
            <label style="margin-left:50px;margin-top:50px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 18px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">Seller :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;" > {{ product.user_data.first_name }} {{ product.user_data.last_name }}</span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 18px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">Email  :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;" ><label id="email_addr">{{ product.user_data.user_email }}</label> </span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 18px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">Mobile No.  :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;"> {{ product.user_data.user_phone_no }} </span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 18px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">State  :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;" > {{ product.state }} </span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 18px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">City  :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;" > {{ product.city }} </span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style='color:rgba(168,168,167,1);font:normal normal normal 18px/1.4em georgia,palatino,"book antiqua","palatino linotype",serif' > {{ product.product_description }} </span></label>
            <br><label style="margin-left:50px;margin-top:1px;"><span style="color:rgba(255,255,255,1);font:normal normal normal 25px/1.4em avenir-lt-w01_85-heavy1475544,sans-serif;">Price  :</span><span style="color:rgba(168,168,167,1);font-family:'Slabo 70px', serif;font-size:20px;" > {{ product.price }} </span></label>
            {% endfor %}
            <br>
            <div style="margin-left:50px;">
            <button type="button" class="btn btn-success" style="height:50px;margin-top:10px;width:150px;" onclick="send_email();">Notify Seller</button>
            </div>
            </div>
    </div>
<script>
    function send_email(){
    var email = document.getElementById('email').textContent
    var first_name = document.getElementById('first_name').textContent
    var last_name = document.getElementById('last_name').textContent
    var phone_no = document.getElementById('phone').textContent
    var user_email = document.getElementById('email_addr').textContent
    var product = document.getElementById('product').textContent;

    if(!email || !first_name || !last_name || !phone_no || !user_email || !product)
    {
        alert("Something is missing");
    }
    else
    {
        var link = "mailto:"+user_email
                 + "?cc="+email
                 + "&subject= Product Inquiry."
                 + "&body=Greetings from BuyNSell.User "+first_name+" "+last_name+" wants to buy your product "+product+".<br>User details are : Email-address : "+email+" Phone no. "+phone_no+".Please send confirmation to "+email+" or contact as soon as possible. ";
        window.location.href = link;
    }
}
</script>
</body>
</html>